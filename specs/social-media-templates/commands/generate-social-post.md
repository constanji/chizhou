---
description: 根据模板生成朋友圈内容
handoffs: []
scripts:
  sh: scripts/placeholder-processor.sh {ARGS}
---

## 用户输入

```text
$ARGUMENTS
```

在继续之前，你**必须**考虑用户输入（如果不为空）。

## 概述

目标：根据用户提供的场景和内容信息，使用朋友圈模板系统生成完整的朋友圈内容。

注意：此命令需要用户提供基本的内容信息，系统将根据模板和变量替换机制生成规范的朋友圈内容。

执行步骤：

1. **分析用户需求**
   - 从用户输入中提取内容主题和场景类型
   - 识别需要的模板类型（美食、旅行、活动、成就、日常）
   - 确定内容的基本要素（时间、地点、人物、事件）
   - 识别用户的情感倾向和表达需求

2. **选择合适模板**

   a. **确定场景类型**：
      - 如果用户输入包含美食相关关键词，选择美食模板
      - 如果用户输入包含旅行相关关键词，选择旅行模板
      - 如果用户输入包含活动相关关键词，选择活动模板
      - 如果用户输入包含成就相关关键词，选择成就模板
      - 如果用户输入包含日常相关关键词，选择日常模板
      - 如果无法确定，使用基础社交模板

   b. **加载模板文件**：
      - 美食场景：`templates/scenario-templates/food-post.md`
      - 旅行场景：`templates/scenario-templates/travel-post.md`
      - 活动场景：`templates/scenario-templates/event-post.md`
      - 成就场景：`templates/scenario-templates/achievement-post.md`
      - 日常场景：`templates/scenario-templates/daily-life-post.md`
      - 基础模板：`templates/social-post-template.md`

3. **提取内容信息**

   a. **基本信息提取**：
      - 时间信息：[日期]、[时间]、[季节]等
      - 地点信息：[地点]、[城市]、[场所]等
      - 人物信息：[人物]、[朋友]、[家人]等
      - 事件信息：[活动描述]、[项目名称]等

   b. **情感信息提取**：
      - 心情状态：[心情形容词]、[感受描述]
      - 体验评价：[体验评价]、[推荐程度]
      - 情感表达：[情感标签]、[表情符号]

   c. **实用信息提取**：
      - 价格信息：[人均价格]、[费用范围]
      - 时间信息：[时间跨度]、[活动时间]
      - 其他信息：[交通方式]、[注意事项]

4. **执行变量替换**

   a. **动态变量替换**：
      - 自动替换动态变量：[日期]、[时间]、[星期]等
      - 使用当前系统时间或用户指定时间

   b. **静态变量替换**：
      - 根据用户输入替换静态变量
      - 参考变量参考手册选择合适的值
      - 确保替换后语句通顺

   c. **格式变量替换**：
      - 根据场景选择合适表情符号
      - 根据内容选择相关话题标签
      - 确保格式规范符合要求

5. **应用格式规范**

   a. **文本格式检查**：
      - 检查段落长度（每段2-4行）
      - 检查标点符号使用
      - 检查空格和换行规范
      - 检查字体样式使用

   b. **图片建议生成**：
      - 根据场景建议图片数量
      - 建议图片内容和顺序
      - 提供拍摄和编辑建议

   c. **标签系统生成**：
      - 生成3-5个相关话题标签
      - 按重要性排列标签顺序
      - 确保标签格式正确

6. **生成最终内容**

   a. **内容组合**：
      - 将替换后的各部分组合成完整内容
      - 确保逻辑连贯，过渡自然
      - 保持统一的语气和风格
      - **重要**：必须生成连续流畅的文案，不要包含模板中的标题（如"时间引出"、"基本情况"、"主要活动"、"环境特点"、"特别瞬间"、"当下心情"、"情绪来源"、"特别之处"、"小感悟"、"生活启示"、"经历共鸣"、"分享邀请"等）
      - 直接将这些部分的内容自然地串联成一段连贯的文案，使用适当的连接词和过渡语句

   b. **质量检查**：
      - 检查内容完整性
      - 检查格式规范性
      - 检查情感表达适当性
      - 检查互动引导有效性
      - **重要**：确保没有出现模板结构标题，文案应该是自然流畅的连续文本

   c. **输出格式**：
      - 提供纯文本格式内容（连续文案，无标题）
      - 提供带格式建议的版本
      - 提供变量替换记录

7. **提供使用建议**

   a. **发布建议**：
      - 建议发布时间段
      - 建议互动方式
      - 建议后续维护

   b. **优化建议**：
      - 根据反馈优化建议
      - 个性化调整建议
      - 持续改进建议

8. **报告完成**

   报告生成结果，包括：
   - 使用的模板名称和路径
   - 替换的变量列表和值
   - 生成的完整朋友圈内容
   - 格式规范检查结果
   - 发布和使用建议

## 行为规则

- **模板选择**：
  - 优先选择最匹配的场景模板
  - 如果多个模板匹配，选择最具体的模板
  - 如果无匹配模板，使用基础模板

- **变量替换**：
  - 必须替换所有变量占位符
  - 替换值要准确具体
  - 替换后要检查语句通顺

- **格式规范**：
  - 必须遵守所有格式规范
  - 检查文本、图片、标签规范
  - 确保移动端显示正常

- **内容生成格式**（**重要**）：
  - **禁止包含模板结构标题**：生成的内容必须是连续流畅的文案，不能包含任何模板中的标题（如"时间引出"、"基本情况"、"主要活动"、"环境特点"、"特别瞬间"、"当下心情"、"情绪来源"、"特别之处"、"小感悟"、"生活启示"、"经历共鸣"、"分享邀请"等）
  - **自然串联**：将模板各部分的内容自然地串联成一段连贯的文案，使用适当的连接词、过渡语句和标点符号
  - **段落划分**：可以适当分段，但每段应该是完整的句子，不能是标题+内容的格式
  - **示例正确格式**：
    ```
    深夜还在调试代码，程序员的生活就是这么朴实无华！😫 凌晨2点在电脑前，盯着满屏的代码。正在调试智能体的边界情况，处理各种奇怪的输入场景。周围只有键盘敲击声和咖啡的香气，感觉整个世界都安静了。突然遇到一个bug怎么也复现不了，觉得人生好难。那一刻的心情是崩溃又无奈，感觉头发又少了几根。这种情绪来自于智能体总是理解错用户意图，因为训练数据不够全面。和平时不同的是这次要处理自然语言理解，让我深刻体会到AI的局限性。突然明白为什么说"智能体开发，调试占80%"，原来真的不是在开玩笑。生活就是这样，你以为在创造智能，其实是在跟各种边界条件斗智斗勇。大家有没有过调试到怀疑人生的经历？程序员们来抱团取暖吧！欢迎分享你的开发吐槽故事！让我们一起苦中作乐！
    
    #程序员日常 #AI开发 #调试人生 #智能体开发 #代码吐槽
    ```
  - **示例错误格式**（禁止）：
    ```
    时间引出：深夜还在调试代码...
    
    基本情况
    凌晨2点在电脑前...
    
    主要活动
    正在调试智能体...
    ```

- **质量保证**：
  - 生成的内容必须可直接使用
  - 内容要真实可信
  - 表达要恰当得体
  - 文案要自然流畅，无结构标题

- **用户交互**：
  - 如果信息不足，询问用户补充
  - 提供选项让用户选择
  - 尊重用户的个性化需求

## 示例执行

### 示例输入：
```
用户：想分享今天去故宫的经历，和朋友一起，天气很好，拍了很多照片，感觉很震撼
```

### 执行过程：
1. **分析需求**：旅行场景，地点故宫，和朋友一起，天气好，感受震撼
2. **选择模板**：旅行场景模板
3. **提取信息**：
   - 时间：今天
   - 地点：故宫
   - 人物：朋友
   - 天气：很好
   - 感受：震撼
4. **变量替换**：
   - [旅行地点] → 故宫
   - [人物] → 朋友
   - [天气状况] → 晴朗
   - [总体感受] → 非常震撼
5. **生成内容**：完整的朋友圈内容（连续文案，无标题）
6. **格式检查**：符合所有格式规范，确保无结构标题
7. **输出结果**：提供可直接发布的内容

### 示例输出（正确格式）：
```
终于来到了向往已久的故宫！✈️ 今天和朋友一起，天气特别好，阳光洒在红墙黄瓦上，美得让人震撼。拍了很多照片，每一张都想珍藏。最让我印象深刻的是太和殿的宏伟，站在下面真的能感受到历史的厚重。这次故宫之行真的很值得，期待下次再来发现更多美好！

#旅行日记 #故宫 #风景摄影 #旅行分享 #美好时光
```

## 错误处理

### 常见错误：
1. **信息不足**：用户输入信息不完整
   - 处理：询问用户补充必要信息
   - 示例：请问具体是什么时间？和谁一起？

2. **模板不匹配**：没有完全匹配的模板
   - 处理：使用基础模板，或组合多个模板
   - 示例：使用基础模板，结合场景特点

3. **变量冲突**：变量替换后语句不通
   - 处理：调整变量位置或连接词
   - 示例：调整句子结构，使语句通顺

4. **格式错误**：生成内容格式不规范
   - 处理：重新检查并修正格式
   - 示例：调整段落长度，修正标点

### 错误预防：
- 提前验证用户输入
- 使用模板前检查完整性
- 替换后立即检查语句
- 最终输出前全面检查

## 优化建议

### 模板优化：
- 根据使用反馈优化模板
- 添加新的场景模板
- 优化变量定义和使用

### 流程优化：
- 简化变量替换流程
- 自动化格式检查
- 提供更多个性化选项

### 用户体验：
- 提供更友好的交互界面
- 支持批量生成
- 提供历史记录和模板

Context for prioritization: {ARGS}